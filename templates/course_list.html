{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% load l10n %}

{% block content %}
{% now "Y-m-d" as todays_date %}
{% now "Y" as current_year %}

<h2>{% trans "Current Courses" %}</h2>

{% regroup current_courses by start_date.year as current_course_years %}
{% regroup past_courses by start_date.year as past_course_years %}

{% for year in current_course_years %}
<h3 class="my-4">{{ year.grouper }}</h3>

{% if year.list %}
{% include "course_list_header.html" %}
{% endif %}
<div class="accordion" id="accordion-{{ year.grouper }}">
    {% for course in year.list %}
    {% include "course_list_item.html" with course=course year=year.grouper %}
    {% endfor %}
</div>
{% empty %}
<p>{% trans "There are currently no courses available." %}</p>
{% endfor %}

<button class="btn btn-outline-primary mt-5" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePastCourses"
    aria-expanded="false" aria-controls="collapsePastCourses">
    {%trans "Show/Hide past years" %}
</button>
<div class="collapse" id="collapsePastCourses">
    {% for year in past_course_years %}
    <h3 class="my-4">{{ year.grouper }}</h3>
    {% if year.list %}
    {% include "course_list_header.html" %}
    {% endif %}
    <div class="accordion" id="accordion-{{ year.grouper }}">
        {% for course in year.list %}
        {% include "course_list_item.html" with course=course year=year.grouper %}
        {% endfor %}
    </div>
    {% empty %}
    <p>{% trans "There are no past courses." %}</p>
    {% endfor %}
</div>

{% endblock content %}
